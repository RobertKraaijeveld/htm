<div class="container-fluid" ng-controller="ParticipantListCtrl">
	<div class="row">
		<div class="col-md-12">
			<h2>
				Participants
				<small class="totals hidden-sm	 hidden-xs">
			        <ng-pluralize count="totals.participants" when="{'one': '1 person', 'other': '{} people'}"></ng-pluralize>
			        from
			        <ng-pluralize count="totals.clubs" when="{'one': '1 club', 'other': '{} clubs'}"></ng-pluralize>
			        in
			        <ng-pluralize count="totals.countries" when="{'one': '1 country', 'other': '{} countries'}"></ng-pluralize>
				</small>
			<div class="btn-group pull-right" >
				<div  class="btn btn-default ">
					<div ng-click="addParticipant()" role="button" class="">
						<span class="glyphicon glyphicon-plus"></span>Add</span>
					</div>
				</div>	
				<div  class="btn btn-default dropdown htm-dropdown-menu-z-fix">
					<div role="button" class="dropdown-toggle" data-toggle="dropdown">
						Actions <span class="caret"></span>
					</div>
					<ul class="dropdown-menu htm-dropdown-menu-z-fix" role="menu">
						<li class="actionButton"><a href="" ng-click="registerAll()"><span><span class="glyphicon glyphicon-ok"></span> Register All</span></a></li>
						<li class="actionButton"><a href="" ng-click="unregisterAll()"><span><span class="glyphicon glyphicon-remove"></span>Unregister All</span></a></li>
					</ul>
				</div>	
				<div  class="btn btn-default dropdown htm-dropdown-menu-z-fix">
					<div type="button" class="dropdown-toggle" data-toggle="dropdown">
						<span class="glyphicon glyphicon-download"></span> Download <span class="caret"></span>
					</div>
					<ul class="dropdown-menu" role="menu">
						<!--TODO: Implement links-->
						<li class="downloadButton"><a href="/download/participants">Participant</a></li>
						<li class="downloadButton"><a href="/download/clubs">Clubs</a></li>
						<li class="downloadButton"><a href="/download/details">Finalist Details</a></li>
					</ul>
				</div>	
			</div>
			</h2>
		</div>
	</div>
	<div class="row">
		<div class="col-md-12">
			<div class="input-group">
				<span role="button" class="btn btn-default input-group-addon"><span class="glyphicon glyphicon-search"></span></span>
				<!--TODO: Focus on-->
		      	<input ng-model="search" ng-model-options="{updateOn: 'blur'}" type="text" class="form-control" placeholder="Search" ui-keypress="{13:'registerSelected()'}" focus-on="search"/>
		    </div>
		</div>    
    </div>
	<div class="row">
		<div class="col-md-12">
			<table class="table table-striped table-condensed table-hover">
				<thead>
					<tr>
						<!--TODO: Sort buttons-->
						<th>Checks</th>
						<th htm-sort="externalId">ID</th>
						<th>Country</th>
						<th htm-sort="name">Name</th>
						<th htm-sort="shortName">Short name</th>
						<th htm-sort="club">Club</th>
						<th htm-sort="clubCode">Club code</th>
						<th ng-repeat="tournament in tournaments" title="{{tournament.name}}">
							<htm-tournament-memo tournament="tournament"></htm-tournament-memo>
						</th>
						<th><!--Edit--></th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="participant in participants">
						<td>
						    <span class="label" ng-class="participant.isPresent ? 'label-success' : 'label-danger'" title="{{participant.isPresent ? 'Checked in' : 'Not checked in yet'}}">
						    	<span class="glyphicon glyphicon-check"></span>
						    </span>
						    <span class="label" ng-class="participant.hasPicture ? 'label-success' : 'label-warning'" title="{{hasPicture(participant) ? 'Picture is available' : 'No picture available yet'}}">
						    	<span class="glyphicon glyphicon-picture"></span>
						    </span>
						    <span class="label" ng-class="hasDetails(participant) ? 'label-success' : 'label-default'" title="{{hasDetails(participant) ? 'Details are filled in' : 'No details filled in yet'}}">
						    	<span class="glyphicon glyphicon-list"></span>
					    	</span>
						</td>
						<td class="id" title="ID">{{participant.externalId}}</td>
						<td class="flag" title="{{participant.country}}">
							<img ng-src="/img/flag/{{participant.country | lowercase}}.png"/></td>
						<td class="name" title="Name">{{participant.name}}</td>
						<td class="shortName" title="Short Name">{{participant.shortName}}</td>
						<td class="club" title="Club">{{participant.club}}</td>
						<td class="clubCode" title="Club Code">{{participant.clubCode}}</td>
						<td class="tournaments" ng-repeat="tournament in tournaments">
							<htm-subscription-label person="participant" tournament="tournament"/>
						</td>
			          	<td><button class="btn btn-default btn-sm" ng-click="register(participant)">Edit</button></td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
<div>