<!--tournament-list.html-->
<div class="col-md-12" ng-controller="TournamentListCtrl">
	<h2>Tournaments</h2>
	<div class="alert alert-warning" ng-show="isError()">
		<p>Could not load tournaments because {{tournaments.error.status}}:{{tournaments.error.statusText}}.</p>
	</div>
	<div class="list-group">
		<a class="list-group-item" href="#/tournament/{{tournament.identifier}}"  ng-repeat="tournament in tournaments" >
		<htm-tournament-list-item></htm-tournament-list-item>
		</a>
		<a class="list-group-item" href="" ng-click="showAddNewTournament()" ng-hide="addNewTournamentVisible" >
			<h4 class="">
				<span class="glyphicon glyphicon-plus" ></span>
				Add Tournament
			</h4>
		</a>
		<div class="panel panel-default" ng-show="addNewTournamentVisible && isLoaded()" >
			<div class="panel-heading">
				<h4 class="">
					<span class="glyphicon glyphicon-plus" ></span>
					Add Tournament
				</h4>
			</div>
		<div class="panel-body">
			<form class="css-form" name="form" novalidate>
				<div class="form-group">
					<label for="name">Name</label>
					<input ng-model="newTournament.name" class="form-control" type="text" id="name" required="" name="name" htm-focus-on="addNewTournamentVisible" ng-pattern="/^[a-z\d ]+$/i">
				</div>
				<div class="alert alert-danger" for="name" ng-show="form.name.$error.required">
					<span class="glyphicon glyphicon-exclamation-sign"></span>
					Please provide a name
				</div>
				<div class="alert alert-danger" for="identifier" ng-show="form.name.$error.pattern">
					<span class="glyphicon glyphicon-exclamation-sign"></span>
					You may only use the characters a-z, A-Z, 0-9 and ' '
				</div>		
				<div class="row">
					<div class="col-xs-8 form-group">
						<label for="identifier">
							Identifier
							<div class="btn-group">
								<label class="btn btn-success btn-xs" ng-model="newTournament.customIdentifier" btn-radio="false">Default</label>
								<label class="btn btn-success btn-xs" ng-model="newTournament.customIdentifier" btn-radio="true">Custom</label>
							</div>
						</label>
						<p class="form-control-static" ng-hide="newTournament.customIdentifier">{{newTournament.identifier()}}</p>
							<!--TODO: With Angular 1.3.x comes ng-model-options="{ getterSetter: true }" directive which means we don't have to use the private variable but can use the getter/setter-->
							
							<input ng-model="newTournament._identifier" class="form-control" type="text" id="identifier" name="identifier" required="" htm-focus-on="newTournament.customIdentifier" htm-replace-space="-" htm-lower-case="" ng-pattern="/^[a-z\d\-]+$/" ng-show="newTournament.customIdentifier" >
						<div ng-show="newTournament.customIdentifier">

							<div class="alert alert-danger" for="identifier" ng-show="form.identifier.$error.required">
								<span class="glyphicon glyphicon-exclamation-sign"></span>
								Please provide an identifier
							</div>
							<div class="alert alert-danger" for="identifier" ng-show="form.identifier.$error.pattern">
								<span class="glyphicon glyphicon-exclamation-sign"></span>
								You may only use the characters a-z, 0-9 and '-'
							</div>	
						</div>
					</div>
					<div class="col-xs-4 form-group">
						<label for="label">
							Label
							<div class="btn-group">
								<label class="btn btn-success btn-xs" ng-model="newTournament.customMemo" btn-radio="false" >Default</label>
								<label class="btn btn-success btn-xs" ng-model="newTournament.customMemo" btn-radio="true">Custom</label>
							</div>
						</label>
						<p class="form-control-static" ng-hide="newTournament.customMemo">{{newTournament.memo()}}</p>
						<!--TODO: With Angular 1.3.x comes ng-model-options="{ getterSetter: true }" directive which means we don't have to use the private variable
						but can use the getter/setter -->
						<input ng-model="newTournament._memo" class="form-control" type="text" id="memo" name="memo" htm-focus-on="newTournament.customMemo" ng-pattern="/^[A-Z\d]+$/i" ng-show="newTournament.customMemo" required="" htm-upper-case="" htm-replace-space="">
						<div ng-show="newTournament.customMemo">	

							<div class="alert alert-danger" for="memo" ng-show="form.memo.$error.required">
								<span class="glyphicon glyphicon-exclamation-sign"></span>
								Please provide a label
							</div>
							<div class="alert alert-danger" for="memo" ng-show="form.memo.$error.pattern">
								<span class="glyphicon glyphicon-exclamation-sign"></span>
								You may only use the characters A-Z and 0-9
							</div>	
						</div>			
					</div>
				</div>
				<button class="btn btn-primary" ng-click="save()" ng-disabled="form.$invalid " >Save</button>
			</form>
		</div>
	</div>
</div>
